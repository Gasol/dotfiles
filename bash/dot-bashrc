# vim: ft=sh

keychain=$(type -p keychain)
if [ -n "$keychain" ]; then
	keychain_args="--timeout 60"
	case $(uname -s) in
		Darwin)
			keychain_args="$keychain_args --inherit any"
			;;
	esac
	eval $($keychain $keychain_args)
	. ~/.keychain/$HOSTNAME-sh
fi

function load_rcfile {
    if [ -d $1 ]; then
        for content in `\ls $1`; do
            if [ -d $1 ]; then
                load_rcfile $1/$content
            elif [ -f $1 ]; then
                source $1/$content
            fi
        done
    elif [ -f $1 ]; then
        source $1
    fi
}

load_rcfile ~/.bash/rc.os/`uname -s`
load_rcfile ~/.bash/rc.host/$HOSTNAME
load_rcfile ~/.bash/rc
load_rcfile ~/.bash/misc
export BASH_SILENCE_DEPRECATION_WARNING=1
